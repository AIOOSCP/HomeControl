meta:
  name: Helios Ventilation
  description: Integration for Helios ventilation systems

items:
  HeliosVentilation:
    config_fields:
      host:
        type: NetworkAddress
        default: "localhost"

      default_party_duration:
        type: Integer
        default: 5

      default_party_level:
        type: Integer
        default: 3

    config_schema:
      !vol/Required {schema: host}:
        !vol/Coerce { type: !type/str }

      !vol/Required {schema: default_party_duration, default: 5}:
        !vol/Coerce { type: !type/int }

      !vol/Required {schema: default_party_level, default: 4}:
        !vol/All
          - !vol/Coerce { type: !type/int }
          - !vol/Range {min: 1, max: 4}

    state:
      mode:
        type: String
        default: default

      party_time:
        type: Float
        default: 0

      speed:
        type: Integer
        default: 1
        setter: set_speed

    actions:
      start_party: start_party
      stop_party: stop_party